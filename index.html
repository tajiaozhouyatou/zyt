<!DOCTYPE html>
<html lang="zh-cn" class="no-js" id="html-layout">

	<head>
		<meta http-equiv="Content-Type">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<meta name="format-detection" content="telephone=no">
		<meta name="format-detection" content="email=no">
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/amazeui.min.css" />
		<link rel="stylesheet" type="text/css" href="css/animate.min.css" />
		<link type="text/css" rel="stylesheet" href="css/demo.css">
		<link type="text/css" rel="stylesheet" href="css/index.css">
		<link rel="stylesheet" href="css/shop.css" />
	</head>

	<body>
	     tajiaozhouyatou	
		<script src="js/jquery.min.js"></script>
		<script src="js/common.js"></script>
		<script>
			function redy() {
				var len_ = $(".cart_cont ul li").length;
				for(var i = 0; i < len_; i++) {
					var val_ = parseFloat($(".cart_cont ul li").eq(i).find("input.tex").val());
					var Price = $(".cart_cont ul li").eq(i).find("input.tex").attr("price");
					var Num = Price * val_;
					$(".cart_cont ul li").eq(i).find("a.hy").attr("tol", Num)
					if(val_ == 1) {
						$(".cart_cont ul li").eq(i).find(".tn").css({ "background": "#f0f0f0" });
					} else {
						$(".cart_cont ul li").eq(i).find(".tn").css({ "background": "#ffffff" });
					}
				}
			}
			redy();

			function money() {
				var btns = [];
				var len = $(".cart_cont ul li .left_img a.hy");
				$(len).each(function() {
					btns.push($(this).attr("tol"));
				});
				var sum = 0;
				for(var i = 0; i < btns.length; i++) {
					sum = (parseFloat(sum) + parseFloat(btns[i]))
				}
				$("#money").html(sum)
			}
			money();

			//选中
			$(".cart_cont ul").on("click", "li .left_img a", function() {
				var numtxt = parseFloat($(".cart_cont ul li .right_cont .right_d .click input.tex").val()); //数量
				var dor = parseFloat($(this).closest("li").find("i").data("num")); //单价
				$(this).closest("li").find("i").attr("tol", (dor * numtxt));
				if($(this).hasClass("hy")) {
					$(this).removeClass("hy")
					$(".balance .selected1 .chosen").html("全部选中");
					$(".balance .selected1 .lcon").removeClass("lcn");
				} else {
					$(this).addClass("hy");
				}
				money();
			});
			//全选
			$(".balance .selected1 .lcon").click(function() {

				if($(this).hasClass("lcn")) {
					$(".balance .selected1 .chosen").html("全部选中");
					$(this).removeClass("lcn")
					$(".cart_cont ul").find("li .left_img a").removeClass("hy");

				} else {
					money();
					$(this).addClass("lcn")
					$(".balance .selected1 .chosen").html("全部取消");
					$(".cart_cont ul").find("li .left_img a").addClass("hy");
				}
				money();
			});

			//删除
			var fl;
			$(".cart_cont ul").on("click", " .slice", function() {
				fl = $(this).closest("li");
				$(".mask ").show();
				$(".pop").show();
			});
			$(".pop .pop-ft a.cancel").click(function() {
				$(".mask ").hide();
				$(".pop").hide();
			})
			$(".pop .pop-ft a.confirm").click(function() {
				fl.remove();
				money()
				$(".mask ").hide();
				$(".pop").hide();
			})
			//数加
			$(".cart_cont ul ").on("click", ".add", function() {
				var dor = parseFloat($(this).closest("li").find("i").data("num"));
				var num = $(this).prev().val();
				num++;
				$(this).prev().val(num);
				$(this).closest("li").find(".hs").attr("tol", (dor * num));
				$(".cart_cont ul").find(".cart_cont ul li .right_cont .right_d .click span").removeClass("hy");
				if(num > 1) {
					$(this).prevAll(" .tn").css({ "background": "#fff" });
				}
				if(num < 100) {
					$(this).prev().val(num);
				} else {
					$(this).prev().val("99");
				}
				money();
			});
			//数减
			$(".cart_cont ul li .right_cont .right_d .click .tn ").click(function() {
				var dor = parseFloat($(this).closest("li").find("i").data("num"));
				var num = $(this).next().val();
				num--;

				if(num == 1) {
					$(this).closest("li").find(".hs").attr("tol", (dor * num));
					$(this).next().val("1");
					$(this).css({ "background": "#f0f0f0" });
				} else if(num > 1) {
					$(this).next().val(num);
					$(this).closest("li").find(".hs").attr("tol", (dor * num));
				}
				money();
			});
			var nu_ = $(".cart_cont ul li .right_cont .right_d .click input.tex").val();
			if(nu_ == 1) {
				nu_.css({ "background": "#f0f0f0", "color": "#999" });
			} else {
				nu_.css({ "background": "#fff", "color": "#000" });
			}
			//换一批
			$(".guess_like span.renovate").click(function() {
				window.location.reload();
			})
		</script>
	</body>

</html>
